
# 競馬データ分析 Web

## 概要

本アプリケーションは、インターネット上の競馬情報サイト等から取得したデータを用い、競走馬のタイム分析、ランキング作成、および個別の競走成績比較を行うためのWebアプリケーションである。
サーバー側での処理を行わず、ブラウザ上（クライアントサイド）ですべてのデータ処理が完結するため、iOS、Android、PC等のプラットフォームを問わず動作し、かつデータの秘匿性が保たれる設計となっている。

元来iOSアプリ（Swift）として開発された機能をHTMLおよびJavaScriptへ移植したものであり、CSVデータを読み込むことで即座に分析機能を利用可能である。

## 主な機能

### 1. タイムランキング表示

* 場所（東京・京都など）、トラック（芝・ダート）、距離などの条件を指定し、タイム順に競走馬をランキング表示する。
* 統計的な外れ値（参考記録）の除外および表示の切り替えが可能である。

### 2. 馬名検索および比較

* 馬名によるインクリメンタルサーチ機能を備える。
* 任意の複数の馬を選択し、それらの過去の競走成績を同一リスト上で比較表示する機能を有する。
* 比較結果に対しても場所や距離によるフィルタリングを適用可能であり、特定の条件下における優劣のシミュレーションに寄与する。

### 3. データ更新および結合

* アプリケーション内において、既存のCSVデータに対し、新規に取得したCSVデータを結合（マージ）する機能を実装している。
* 結合後のデータは新たなCSVファイルとしてダウンロード保存が可能である。

## 使用方法

### 1. アプリケーションの起動

以下のいずれかの方法によりアプリケーションを起動する。

* **GitHub Pages（推奨）**: 公開されたURLへブラウザからアクセスする。
* **ローカルファイル**: 保存された `index.html` をブラウザで直接開く。

### 2. データの読み込み

1. 画面上部に配置された「ファイルを選択」ボタンを押下する。
2. 事前に用意された `app_data.csv` を選択する。iPhone等のモバイル端末においては「ファイル」アプリや外部クラウドストレージ（Google Drive等）からの選択が可能である。
3. 読み込み完了後、自動的にランキング画面が表示される。

### 3. 分析の実行

* **ランキング**: 画面上部のフィルタ項目を変更することで、条件に応じたランキングを確認できる。
* **検索・比較**: 「馬検索・比較」タブへ切り替え、対象の馬を選択後、「このメンバーの履歴を比較」ボタンを押下することで比較リストを生成する。

## データ更新の手順

PCを使用せず、スマートフォンのみでデータを最新化する手順は以下の通りである。

1. **データの取得**:
* Google Colab等のPython実行環境にてスクレイピング用スクリプトを実行し、特定年月のデータ（CSV）を取得する。


2. **データの結合**:
* 本アプリケーションの「データ更新」タブを選択する。
* 現在のメインデータが読み込まれている状態で、「追加するCSVファイル」として新規取得したデータを指定する。


3. **保存**:
* 結合処理の完了後、「結合したCSVをダウンロード」を押下し、更新された `app_data.csv` を保存する。次回以降はこのファイルを読み込み対象とする。



## 技術仕様

* **フロントエンド**: HTML5, CSS3, JavaScript (Vanilla JS)
* **データ形式**: CSV (Comma-Separated Values)
* **処理方式**: Client-side File API (FileReader) を用いたローカル処理
* **依存関係**: 外部ライブラリ、バックエンドサーバー、データベースは不使用

## 免責事項および利用上の注意

* **データソースについて**: 本アプリケーションはCSVデータの閲覧・解析ツールである。データの取得（スクレイピング）にあたっては、対象サイトの利用規約、Robots.txt、およびアクセス頻度制限等を厳守すること。
* **利用範囲**: 本アプリケーションおよび取得したデータは、個人的な研究・分析の範囲内でのみ利用すること。
* **動作環境**: 最新版のiOS Safari, Google Chrome, Microsoft Edgeでの動作を確認済みである。

## 開発者向け情報

### ディレクトリ構成

* `index.html`: アプリケーション本体（単一ファイルで動作）
* `app_data.csv`: 初期分析用データ
* `README.md`: 本ドキュメント

### 公開手順

GitHub Pagesを利用する場合の手順は以下の通りである。

1. GitHubリポジトリを作成し、`index.html` をアップロードする。
2. リポジトリ設定（Settings）のPagesセクションにて、公開元ブランチを `main` に設定する。
3. 発行されたURLへアクセスする。iOS Safariにおいては「ホーム画面に追加」を行うことで、ネイティブアプリケーションと同様の挙動が可能となる。